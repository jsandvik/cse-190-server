{% extends "base.html" %}

{% block body %}
<script src="{{ url_for('static', filename='teacher_admin/questions.js') }}"></script>
<div class="well">
    {% for entry in entries %}
    <form role="form" method="post">
        <div class="panel panel-default">
            <div class="panel-heading">
                {% if loop.last %}
                    <h3 class="panel-title">New Question</h3>
                {% else %}
                    <h3 class="panel-title">Question {{loop.index}}</h3>
                {% endif %}
            </div>
            <div class="panel-body">
                <div class="form-group">
                    <label>Question</label>
                    <textarea class="form-control" rows="3" name="question">{{entry.question.question}}</textarea>
                </div>
                <label>Answers</label>
                <div class="answers">
                    {% for answer, letter in entry.answers %}
                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon">{{letter}}</span>
                            <input type="text" class="form-control" value="{{answer.text}}" name="answers">
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <div class="form-group">
                    <div class="btn-group">
                        <button class="btn btn-default btn-sm add-answer-btn" type="button">Add Answer</button>
                        <button class="btn btn-default btn-sm remove-answer-btn" type="button">Remove Answer</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Correct Answer</label>
                    <select name="correct-answer" class="form-control correct-answers">
                        <option value="">No correct answer</option>
                        {% for answer, letter in entry.answers %}
                            {% if answer.is_correct %}
                                <option value="{{loop.index0}}" selected="selected">{{letter}}</option>
                            {% else %}
                                <option value="{{loop.index0}}">{{letter}}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </div>
                <div class="btn-group">
                    {% if loop.last %}
                        <button name="action" class="btn btn-primary btn-sm" type="submit" value="add">Add New Question</button>
                    {% else %}
                        <input type="hidden" name="question-id" value="{{entry.question.id}}">
                        <button name="action" class="btn btn-primary btn-sm" type="submit" value="edit">Save Changes</button>
                        <button name="action" class="btn btn-danger btn-sm" type="submit" value="delete">Delete Question</button>
                    {% endif %}
                </div>
            </div>
        </div>
    </form>
    {% endfor %}
    </div>
{% endblock %}